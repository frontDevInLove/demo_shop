import{u as j,f as m,r as x,a as p,b as f,j as s,R as g,C as a,S as C,c as v,d as S,e as b,L as P,I as N}from"./index-lNtPfI5q.js";const E=n=>j(["product",n],()=>m(n)),y=({product:n,position:t,onColorChange:l})=>{const e=u=>{l(u)},[i,c]=x.useState([]);x.useEffect(()=>{if(!n.colors.length)return;const u=n.colors.map(h=>({label:h.name,value:h.id}));c(u)},[n]);const{selectedSize:o,sizeSelect:d}=p({position:t}),r=f({selectedSize:o,position:t,product:n});return s.jsxs("div",{style:{maxWidth:280},className:"text-lg",children:[s.jsxs("p",{className:"text-2xl font-bold",children:[n.name," / ",t.name]}),s.jsxs("p",{children:["Цена: ",t.price,"₽"]}),s.jsx("p",{children:t.description}),s.jsxs(g,{gutter:[16,16],align:"middle",children:[s.jsx(a,{span:10,children:"Цвет:"}),s.jsx(a,{span:14,children:s.jsx(C,{value:t.id,onChange:e,options:i,className:"w-full"})}),s.jsx(a,{span:10,children:"Размер:"}),s.jsx(a,{span:14,children:d}),s.jsx(a,{span:24,children:r&&s.jsx(v,{options:r,available:!!t.sizes.length})})]})]})},I=()=>{const n=S(),{productId:t,positionId:l}=b(),{data:e,isLoading:i,isError:c}=E(Number(t)),o=x.useMemo(()=>e==null?void 0:e.colors.find(r=>r.id===Number(l)),[e,l]);if(i)return s.jsx(P,{});if(c||!e||!e.colors.length)return s.jsx("div",{children:"Error loading products"});if(!o)return n(`/catalog/${e.id}/position/${e.colors[0].id}`),null;const d=r=>{n(`/catalog/${e.id}/position/${r}`)};return s.jsx(s.Fragment,{children:s.jsxs(g,{justify:"center",gutter:[16,16],children:[s.jsx(a,{children:s.jsx(N,{images:o.images})}),s.jsx(a,{children:s.jsx(y,{position:o,product:e,onColorChange:d})})]})})};export{I as default};
